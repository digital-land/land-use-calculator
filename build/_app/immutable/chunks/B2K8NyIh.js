const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BfN7rNmm.js","./B2c5_Eok.js","./dv0JZMFe.js","./BLbg0tTC.js","./0QI0w0yl.js","./Cram60i4.js","./AId8NOvR.js","./CIvz7Jss.js","./ByRDRQcx.js"])))=>i.map(i=>d[i]);
import{f as de,a as ee,c as Vt}from"./DTk36_lE.js";import{w as qt,o as zt}from"./ciWhJM58.js";import{u as We,v as et,x as Kt,y as Ue,h as V,e as jt,b as Ht,o as A,ac as Yt,r as $t,g as Xt,i as tt,s as rt,j as Re,c as fe,D as Zt,k as wt,a as bt,p as Jt,J as _t,w as Qt,m as Wt,ap as st,aq as Oe,ar as er,as as tr,at as rr,I as sr,au as ir,d as nr,av as or,aw as ar,B as lr,ax as cr,ay as fr,az as hr,a6 as ur,aA as dr,t as gr,a7 as it,M as pr,am as Pe,af as nt,q as ie,a4 as j,f as xe,O as yr,a2 as te,a3 as re,a1 as we}from"./PyBl9EmA.js";import{d as mr,s as be}from"./DWoIIiaV.js";import{_ as Q,i as Ce,s as xr,a as wr}from"./Dwxq8o5r.js";let ot=!1;function vt(){ot||(ot=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function br(r){var e=Kt,t=Ue;We(null),et(null);try{return r()}finally{We(e),et(t)}}function _r(r,e,t,s=t){r.addEventListener(e,()=>br(t));const i=r.__on_r;i?r.__on_r=()=>{i(),s(!0)}:r.__on_r=()=>s(!0),vt()}function vr(r,e,t,s){for(var i=[],n=e.length,o=0;o<n;o++)rr(e[o].e,i,!0);var a=n>0&&i.length===0&&t!==null;if(a){var l=t.parentNode;sr(l),l.append(t),s.clear(),H(r,e[0].prev,e[n-1].next)}ir(i,()=>{for(var c=0;c<n;c++){var f=e[c];a||(s.delete(f.k),H(r,f.prev,f.next)),nr(f.e,!a)}})}function Sr(r,e,t,s,i,n=null){var o=r,a={flags:e,items:new Map,first:null};V&&jt();var l=null,c=!1,f=Yt(()=>{var h=t();return Qt(h)?h:h==null?[]:_t(h)});Ht(()=>{var h=A(f),u=h.length;if(c&&u===0)return;c=u===0;let g=!1;if(V){var d=$t(o)===Xt;d!==(u===0)&&(o=tt(),rt(o),Re(!1),g=!0)}if(V){for(var y=null,p,x=0;x<u;x++){if(fe.nodeType===8&&fe.data===Zt){o=fe,g=!0,Re(!1);break}var m=h[x],b=s(m,x);p=St(fe,a,y,null,m,b,x,i,e,t),a.items.set(b,p),y=p}u>0&&rt(tt())}V||Ir(h,a,o,i,e,s,t),n!==null&&(u===0?l?wt(l):l=bt(()=>n(o)):l!==null&&Jt(l,()=>{l=null})),g&&Re(!0),A(f)}),V&&(o=fe)}function Ir(r,e,t,s,i,n,o){var a=r.length,l=e.items,c=e.first,f=c,h,u=null,g=[],d=[],y,p,x,m;for(m=0;m<a;m+=1){if(y=r[m],p=n(y,m),x=l.get(p),x===void 0){var b=f?f.e.nodes_start:t;u=St(b,e,u,u===null?e.first:u.next,y,p,m,s,i,o),l.set(p,u),g=[],d=[],f=u.next;continue}if(Tr(x,y,m),(x.e.f&Oe)!==0&&wt(x.e),x!==f){if(h!==void 0&&h.has(x)){if(g.length<d.length){var S=d[0],I;u=S.prev;var _=g[0],E=g[g.length-1];for(I=0;I<g.length;I+=1)at(g[I],S,t);for(I=0;I<d.length;I+=1)h.delete(d[I]);H(e,_.prev,E.next),H(e,u,_),H(e,E,S),f=S,u=E,m-=1,g=[],d=[]}else h.delete(x),at(x,f,t),H(e,x.prev,x.next),H(e,x,u===null?e.first:u.next),H(e,u,x),u=x;continue}for(g=[],d=[];f!==null&&f.k!==p;)(f.e.f&Oe)===0&&(h??(h=new Set)).add(f),d.push(f),f=f.next;if(f===null)continue;x=f}g.push(x),u=x,f=x.next}if(f!==null||h!==void 0){for(var v=h===void 0?[]:_t(h);f!==null;)(f.e.f&Oe)===0&&v.push(f),f=f.next;var R=v.length;if(R>0){var T=null;vr(e,v,T,l)}}Ue.first=e.first&&e.first.e,Ue.last=u&&u.e}function Tr(r,e,t,s){tr(r.v,e),r.i=t}function St(r,e,t,s,i,n,o,a,l,c){var f=(l&or)!==0,h=(l&ar)===0,u=f?h?Wt(i):st(i):i,g=(l&er)===0?o:st(o),d={i:g,v:u,k:n,a:null,e:null,prev:t,next:s};try{return d.e=bt(()=>a(r,u,g,c),V),d.e.prev=t&&t.e,d.e.next=s&&s.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),s!==null&&(s.prev=d,s.e.prev=d.e),d}finally{}}function at(r,e,t){for(var s=r.next?r.next.e.nodes_start:t,i=e?e.e.nodes_start:t,n=r.e.nodes_start;n!==s;){var o=lr(n);i.before(n),n=o}}function H(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const Ar=Symbol("is custom element"),Er=Symbol("is html");function Dr(r){if(V){var e=!1,t=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var s=r.value;lt(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var i=r.checked;lt(r,"checked",null),r.checked=i}}};r.__on_r=t,cr(t),vt()}}function kr(r,e){var t=It(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function lt(r,e,t,s){var i=It(r);V&&(i[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||i[e]!==(i[e]=t)&&(e==="loading"&&(r[hr]=t),r.removeAttribute(e))}function It(r){return r.__attributes??(r.__attributes={[Ar]:r.nodeName.includes("-"),[Er]:r.namespaceURI===fr})}const Be=new Set;function Mr(r,e,t,s,i=s){var n=t.getAttribute("type")==="checkbox",o=r;let a=!1;if(e!==null)for(var l of e)o=o[l]??(o[l]=[]);o.push(t),_r(t,"change",()=>{var c=t.__value;n&&(c=ct(o,c,t.checked)),i(c)},()=>i(n?[]:null)),ur(()=>{var c=s();if(V&&t.defaultChecked!==t.checked){a=!0;return}n?(c=c||[],t.checked=c.includes(t.__value)):t.checked=dr(t.__value,c)}),gr(()=>{var c=o.indexOf(t);c!==-1&&o.splice(c,1)}),Be.has(o)||(Be.add(o),it(()=>{o.sort((c,f)=>c.compareDocumentPosition(f)===4?-1:1),Be.delete(o)})),it(()=>{if(a){var c;if(n)c=ct(o,c,t.checked);else{var f=o.find(h=>h.checked);c=f==null?void 0:f.__value}i(c)}})}function ct(r,e,t){for(var s=new Set,i=0;i<r.length;i+=1)r[i].checked&&s.add(r[i].__value);return t||s.delete(e),Array.from(s)}function M(r){return(e,...t)=>Rr(r,e,t)}function ae(r,e){return M(Tt(r,e).get)}const{apply:Rr,getOwnPropertyDescriptor:Tt,getPrototypeOf:ze,ownKeys:Or}=Reflect,{iterator:ge,toStringTag:Pr}=Symbol,Cr=Object,{create:Ke,defineProperty:Br}=Cr,Fr=Array,Lr=Fr.prototype,At=Lr[ge],Gr=M(At),Et=ArrayBuffer,Ur=Et.prototype;ae(Ur,"byteLength");const ft=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;ft&&ae(ft.prototype,"byteLength");const Dt=ze(Uint8Array);Dt.from;const O=Dt.prototype;O[ge];M(O.keys);M(O.values);M(O.entries);M(O.set);M(O.reverse);M(O.fill);M(O.copyWithin);M(O.sort);M(O.slice);M(O.subarray);ae(O,"buffer");ae(O,"byteOffset");ae(O,"length");ae(O,Pr);const Nr=Uint8Array,kt=Uint16Array,je=Uint32Array,Vr=Float32Array,ue=ze([][ge]()),Mt=M(ue.next),qr=M(function*(){}().next),zr=ze(ue),Kr=DataView.prototype,jr=M(Kr.getUint16),He=WeakMap,Rt=He.prototype,Ot=M(Rt.get),Hr=M(Rt.set),Pt=new He,Yr=Ke(null,{next:{value:function(){const e=Ot(Pt,this);return Mt(e)}},[ge]:{value:function(){return this}}});function $r(r){if(r[ge]===At&&ue.next===Mt)return r;const e=Ke(Yr);return Hr(Pt,e,Gr(r)),e}const Xr=new He,Zr=Ke(zr,{next:{value:function(){const e=Ot(Xr,this);return qr(e)},writable:!0,configurable:!0}});for(const r of Or(ue))r!=="next"&&Br(Zr,r,Tt(ue,r));const Ct=new Et(4),Jr=new Vr(Ct),Qr=new je(Ct),L=new kt(512),G=new Nr(512);for(let r=0;r<256;++r){const e=r-127;e<-24?(L[r]=0,L[r|256]=32768,G[r]=24,G[r|256]=24):e<-14?(L[r]=1024>>-e-14,L[r|256]=1024>>-e-14|32768,G[r]=-e-1,G[r|256]=-e-1):e<=15?(L[r]=e+15<<10,L[r|256]=e+15<<10|32768,G[r]=13,G[r|256]=13):e<128?(L[r]=31744,L[r|256]=64512,G[r]=24,G[r|256]=24):(L[r]=31744,L[r|256]=64512,G[r]=13,G[r|256]=13)}const Ye=new je(2048);for(let r=1;r<1024;++r){let e=r<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,Ye[r]=e|t}for(let r=1024;r<2048;++r)Ye[r]=939524096+(r-1024<<13);const le=new je(64);for(let r=1;r<31;++r)le[r]=r<<23;le[31]=1199570944;le[32]=2147483648;for(let r=33;r<63;++r)le[r]=2147483648+(r-32<<23);le[63]=3347054592;const Bt=new kt(64);for(let r=1;r<64;++r)r!==32&&(Bt[r]=1024);function Wr(r){const e=r>>10;return Qr[0]=Ye[Bt[e]+(r&1023)]+le[e],Jr[0]}function Ft(r,e,...t){return Wr(jr(r,e,...$r(t)))}function Lt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _e={exports:{}},ht;function es(){if(ht)return _e.exports;ht=1;function r(e,t,s){const i=s&&s.debug||!1;i&&console.log("[xml-utils] getting "+t+" in "+e);const n=typeof e=="object"?e.outer:e,o=n.slice(0,n.indexOf(">")+1),a=['"',"'"];for(let l=0;l<a.length;l++){const c=a[l],f=t+"\\="+c+"([^"+c+"]*)"+c;i&&console.log("[xml-utils] pattern:",f);const u=new RegExp(f).exec(o);if(i&&console.log("[xml-utils] match:",u),u)return u[1]}}return _e.exports=r,_e.exports.default=r,_e.exports}var ts=es();const Fe=Lt(ts);var ve={exports:{}},Se={exports:{}},Ie={exports:{}},ut;function rs(){if(ut)return Ie.exports;ut=1;function r(e,t,s){const n=new RegExp(t).exec(e.slice(s));return n?s+n.index:-1}return Ie.exports=r,Ie.exports.default=r,Ie.exports}var Te={exports:{}},dt;function ss(){if(dt)return Te.exports;dt=1;function r(e,t,s){const n=new RegExp(t).exec(e.slice(s));return n?s+n.index+n[0].length-1:-1}return Te.exports=r,Te.exports.default=r,Te.exports}var Ae={exports:{}},gt;function is(){if(gt)return Ae.exports;gt=1;function r(e,t){const s=new RegExp(t,"g"),i=e.match(s);return i?i.length:0}return Ae.exports=r,Ae.exports.default=r,Ae.exports}var pt;function ns(){if(pt)return Se.exports;pt=1;const r=rs(),e=ss(),t=is();function s(i,n,o){const a=o&&o.debug||!1,l=!(o&&typeof o.nested===!1),c=o&&o.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",n," and ",o);const f=r(i,`<${n}[ 
>/]`,c);if(a&&console.log("[xml-utils] start:",f),f===-1)return;const h=i.slice(f+n.length);let u=e(h,"^[^<]*[ /]>",0);const g=u!==-1&&h[u-1]==="/";if(a&&console.log("[xml-utils] selfClosing:",g),g===!1)if(l){let x=0,m=1,b=0;for(;(u=e(h,"[ /]"+n+">",x))!==-1;){const S=h.substring(x,u+1);if(m+=t(S,"<"+n+`[ 
	>]`),b+=t(S,"</"+n+">"),b>=m)break;x=u}}else u=e(h,"[ /]"+n+">",0);const d=f+n.length+u+1;if(a&&console.log("[xml-utils] end:",d),d===-1)return;const y=i.slice(f,d);let p;return g?p=null:p=y.slice(y.indexOf(">")+1,y.lastIndexOf("<")),{inner:p,outer:y,start:f,end:d}}return Se.exports=s,Se.exports.default=s,Se.exports}var yt;function os(){if(yt)return ve.exports;yt=1;const r=ns();function e(t,s,i){const n=[],o=i&&i.debug||!1,a=i&&typeof i.nested=="boolean"?i.nested:!0;let l=i&&i.startIndex||0,c;for(;c=r(t,s,{debug:o,startIndex:l});)a?l=c.start+1+s.length:l=c.end,n.push(c);return o&&console.log("findTagsByName found",n.length,"tags"),n}return ve.exports=e,ve.exports.default=e,ve.exports}var as=os();const ls=Lt(as),he={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},U={};for(const r in he)he.hasOwnProperty(r)&&(U[he[r]]=parseInt(r,10));const cs=[U.BitsPerSample,U.ExtraSamples,U.SampleFormat,U.StripByteCounts,U.StripOffsets,U.StripRowCounts,U.TileByteCounts,U.TileOffsets,U.SubIFDs],Le={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},w={};for(const r in Le)Le.hasOwnProperty(r)&&(w[Le[r]]=parseInt(r,10));const F={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},fs={Unspecified:0},yi={AddCompression:1},mi={None:0,Deflate:1,Zstandard:2},hs={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function us(r,e){const{width:t,height:s}=r,i=new Uint8Array(t*s*3);let n;for(let o=0,a=0;o<r.length;++o,a+=3)n=256-r[o]/e*256,i[a]=n,i[a+1]=n,i[a+2]=n;return i}function ds(r,e){const{width:t,height:s}=r,i=new Uint8Array(t*s*3);let n;for(let o=0,a=0;o<r.length;++o,a+=3)n=r[o]/e*256,i[a]=n,i[a+1]=n,i[a+2]=n;return i}function gs(r,e){const{width:t,height:s}=r,i=new Uint8Array(t*s*3),n=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<r.length;++a,l+=3){const c=r[a];i[l]=e[c]/65536*256,i[l+1]=e[c+n]/65536*256,i[l+2]=e[c+o]/65536*256}return i}function ps(r){const{width:e,height:t}=r,s=new Uint8Array(e*t*3);for(let i=0,n=0;i<r.length;i+=4,n+=3){const o=r[i],a=r[i+1],l=r[i+2],c=r[i+3];s[n]=255*((255-o)/256)*((255-c)/256),s[n+1]=255*((255-a)/256)*((255-c)/256),s[n+2]=255*((255-l)/256)*((255-c)/256)}return s}function ys(r){const{width:e,height:t}=r,s=new Uint8ClampedArray(e*t*3);for(let i=0,n=0;i<r.length;i+=3,n+=3){const o=r[i],a=r[i+1],l=r[i+2];s[n]=o+1.402*(l-128),s[n+1]=o-.34414*(a-128)-.71414*(l-128),s[n+2]=o+1.772*(a-128)}return s}const ms=.95047,xs=1,ws=1.08883;function bs(r){const{width:e,height:t}=r,s=new Uint8Array(e*t*3);for(let i=0,n=0;i<r.length;i+=3,n+=3){const o=r[i+0],a=r[i+1]<<24>>24,l=r[i+2]<<24>>24;let c=(o+16)/116,f=a/500+c,h=c-l/200,u,g,d;f=ms*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),c=xs*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),h=ws*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),u=f*3.2406+c*-1.5372+h*-.4986,g=f*-.9689+c*1.8758+h*.0415,d=f*.0557+c*-.204+h*1.057,u=u>.0031308?1.055*u**(1/2.4)-.055:12.92*u,g=g>.0031308?1.055*g**(1/2.4)-.055:12.92*g,d=d>.0031308?1.055*d**(1/2.4)-.055:12.92*d,s[n]=Math.max(0,Math.min(1,u))*255,s[n+1]=Math.max(0,Math.min(1,g))*255,s[n+2]=Math.max(0,Math.min(1,d))*255}return s}const Gt=new Map;function Y(r,e){Array.isArray(r)||(r=[r]),r.forEach(t=>Gt.set(t,e))}async function _s(r){const e=Gt.get(r.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${r.Compression}`);const t=await e();return new t(r)}Y([void 0,1],()=>Q(()=>import("./BfN7rNmm.js"),__vite__mapDeps([0,1]),import.meta.url).then(r=>r.default));Y(5,()=>Q(()=>import("./dv0JZMFe.js"),__vite__mapDeps([2,1]),import.meta.url).then(r=>r.default));Y(6,()=>{throw new Error("old style JPEG compression is not supported.")});Y(7,()=>Q(()=>import("./BLbg0tTC.js"),__vite__mapDeps([3,1]),import.meta.url).then(r=>r.default));Y([8,32946],()=>Q(()=>import("./0QI0w0yl.js"),__vite__mapDeps([4,5,1]),import.meta.url).then(r=>r.default));Y(32773,()=>Q(()=>import("./AId8NOvR.js"),__vite__mapDeps([6,1]),import.meta.url).then(r=>r.default));Y(34887,()=>Q(()=>import("./CIvz7Jss.js"),__vite__mapDeps([7,5,1]),import.meta.url).then(async r=>(await r.zstd.init(),r)).then(r=>r.default));Y(50001,()=>Q(()=>import("./ByRDRQcx.js"),__vite__mapDeps([8,1]),import.meta.url).then(r=>r.default));function De(r,e,t,s=1){return new(Object.getPrototypeOf(r)).constructor(e*t*s)}function vs(r,e,t,s,i){const n=e/s,o=t/i;return r.map(a=>{const l=De(a,s,i);for(let c=0;c<i;++c){const f=Math.min(Math.round(o*c),t-1);for(let h=0;h<s;++h){const u=Math.min(Math.round(n*h),e-1),g=a[f*e+u];l[c*s+h]=g}}return l})}function ne(r,e,t){return(1-t)*r+t*e}function Ss(r,e,t,s,i){const n=e/s,o=t/i;return r.map(a=>{const l=De(a,s,i);for(let c=0;c<i;++c){const f=o*c,h=Math.floor(f),u=Math.min(Math.ceil(f),t-1);for(let g=0;g<s;++g){const d=n*g,y=d%1,p=Math.floor(d),x=Math.min(Math.ceil(d),e-1),m=a[h*e+p],b=a[h*e+x],S=a[u*e+p],I=a[u*e+x],_=ne(ne(m,b,y),ne(S,I,y),f%1);l[c*s+g]=_}}return l})}function Is(r,e,t,s,i,n="nearest"){switch(n.toLowerCase()){case"nearest":return vs(r,e,t,s,i);case"bilinear":case"linear":return Ss(r,e,t,s,i);default:throw new Error(`Unsupported resampling method: '${n}'`)}}function Ts(r,e,t,s,i,n){const o=e/s,a=t/i,l=De(r,s,i,n);for(let c=0;c<i;++c){const f=Math.min(Math.round(a*c),t-1);for(let h=0;h<s;++h){const u=Math.min(Math.round(o*h),e-1);for(let g=0;g<n;++g){const d=r[f*e*n+u*n+g];l[c*s*n+h*n+g]=d}}}return l}function As(r,e,t,s,i,n){const o=e/s,a=t/i,l=De(r,s,i,n);for(let c=0;c<i;++c){const f=a*c,h=Math.floor(f),u=Math.min(Math.ceil(f),t-1);for(let g=0;g<s;++g){const d=o*g,y=d%1,p=Math.floor(d),x=Math.min(Math.ceil(d),e-1);for(let m=0;m<n;++m){const b=r[h*e*n+p*n+m],S=r[h*e*n+x*n+m],I=r[u*e*n+p*n+m],_=r[u*e*n+x*n+m],E=ne(ne(b,S,y),ne(I,_,y),f%1);l[c*s*n+g*n+m]=E}}}return l}function Es(r,e,t,s,i,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return Ts(r,e,t,s,i,n);case"bilinear":case"linear":return As(r,e,t,s,i,n);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function Ds(r,e,t){let s=0;for(let i=e;i<t;++i)s+=r[i];return s}function Ne(r,e,t){switch(r){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function ks(r,e){return(r===1||r===2)&&e<=32&&e%8===0?!1:!(r===3&&(e===16||e===32||e===64))}function Ms(r,e,t,s,i,n,o){const a=new DataView(r),l=t===2?o*n:o*n*s,c=t===2?1:s,f=Ne(e,i,l),h=parseInt("1".repeat(i),2);if(e===1){let u;t===1?u=s*i:u=i;let g=n*u;(g&7)!==0&&(g=g+7&-8);for(let d=0;d<o;++d){const y=d*g;for(let p=0;p<n;++p){const x=y+p*c*i;for(let m=0;m<c;++m){const b=x+m*i,S=(d*n+p)*c+m,I=Math.floor(b/8),_=b%8;if(_+i<=8)f[S]=a.getUint8(I)>>8-i-_&h;else if(_+i<=16)f[S]=a.getUint16(I)>>16-i-_&h;else if(_+i<=24){const E=a.getUint16(I)<<8|a.getUint8(I+2);f[S]=E>>24-i-_&h}else f[S]=a.getUint32(I)>>32-i-_&h}}}}return f.buffer}class Rs{constructor(e,t,s,i,n,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=s,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,s=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(s<=8)return DataView.prototype.getUint8;if(s<=16)return DataView.prototype.getUint16;if(s<=32)return DataView.prototype.getUint32;break;case 2:if(s<=8)return DataView.prototype.getInt8;if(s<=16)return DataView.prototype.getInt16;if(s<=32)return DataView.prototype.getInt32;break;case 3:switch(s){case 16:return function(i,n){return Ft(this,i,n)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const s=this.getSampleFormat(e),i=this.getBitsPerSample(e);return Ne(s,i,t)}async getTileOrStrip(e,t,s,i,n){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let l;const{tiles:c}=this;this.planarConfiguration===1?l=t*o+e:this.planarConfiguration===2&&(l=s*o*a+t*o+e);let f,h;this.isTiled?(f=this.fileDirectory.TileOffsets[l],h=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],h=this.fileDirectory.StripByteCounts[l]);const u=(await this.source.fetch([{offset:f,length:h}],n))[0];let g;return c===null||!c[l]?(g=(async()=>{let d=await i.decode(this.fileDirectory,u);const y=this.getSampleFormat(),p=this.getBitsPerSample();return ks(y,p)&&(d=Ms(d,y,this.planarConfiguration,this.getSamplesPerPixel(),p,this.getTileWidth(),this.getBlockHeight(t))),d})(),c!==null&&(c[l]=g)):g=c[l],{x:e,y:t,sample:s,data:await g}}async _readRaster(e,t,s,i,n,o,a,l,c){const f=this.getTileWidth(),h=this.getTileHeight(),u=this.getWidth(),g=this.getHeight(),d=Math.max(Math.floor(e[0]/f),0),y=Math.min(Math.ceil(e[2]/f),Math.ceil(u/f)),p=Math.max(Math.floor(e[1]/h),0),x=Math.min(Math.ceil(e[3]/h),Math.ceil(g/h)),m=e[2]-e[0];let b=this.getBytesPerPixel();const S=[],I=[];for(let v=0;v<t.length;++v)this.planarConfiguration===1?S.push(Ds(this.fileDirectory.BitsPerSample,0,t[v])/8):S.push(0),I.push(this.getReaderForSample(t[v]));const _=[],{littleEndian:E}=this;for(let v=p;v<x;++v)for(let R=d;R<y;++R){let T;this.planarConfiguration===1&&(T=this.getTileOrStrip(R,v,0,n,c));for(let P=0;P<t.length;++P){const N=P,W=t[P];this.planarConfiguration===2&&(b=this.getSampleByteSize(W),T=this.getTileOrStrip(R,v,W,n,c));const ke=T.then($=>{const Me=$.data,D=new DataView(Me),k=this.getBlockHeight($.y),C=$.y*h,B=$.x*f,X=C+k,Z=($.x+1)*f,ce=I[N],q=Math.min(k,k-(X-e[3]),g-C),pe=Math.min(f,f-(Z-e[2]),u-B);for(let z=Math.max(0,e[1]-C);z<q;++z)for(let J=Math.max(0,e[0]-B);J<pe;++J){const K=(z*f+J)*b,ye=ce.call(D,K+S[N],E);let me;i?(me=(z+C-e[1])*m*t.length+(J+B-e[0])*t.length+N,s[me]=ye):(me=(z+C-e[1])*m+J+B-e[0],s[N][me]=ye)}});_.push(ke)}}if(await Promise.all(_),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let v;return i?v=Es(s,e[2]-e[0],e[3]-e[1],o,a,t.length,l):v=Is(s,e[2]-e[0],e[3]-e[1],o,a,l),v.width=o,v.height=a,v}return s.width=o||e[2]-e[0],s.height=a||e[3]-e[1],s}async readRasters({window:e,samples:t=[],interleave:s,pool:i=null,width:n,height:o,resampleMethod:a,fillValue:l,signal:c}={}){const f=e||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");const h=f[2]-f[0],u=f[3]-f[1],g=h*u,d=this.getSamplesPerPixel();if(!t||!t.length)for(let m=0;m<d;++m)t.push(m);else for(let m=0;m<t.length;++m)if(t[m]>=d)return Promise.reject(new RangeError(`Invalid sample index '${t[m]}'.`));let y;if(s){const m=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,b=Math.max.apply(null,this.fileDirectory.BitsPerSample);y=Ne(m,b,g*t.length),l&&y.fill(l)}else{y=[];for(let m=0;m<t.length;++m){const b=this.getArrayForSample(t[m],g);Array.isArray(l)&&m<l.length?b.fill(l[m]):l&&!Array.isArray(l)&&b.fill(l),y.push(b)}}const p=i||await _s(this.fileDirectory);return await this._readRaster(f,t,y,s,p,n,o,a,c)}async readRGB({window:e,interleave:t=!0,pool:s=null,width:i,height:n,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const f=this.fileDirectory.PhotometricInterpretation;if(f===F.RGB){let x=[0,1,2];if(this.fileDirectory.ExtraSamples!==fs.Unspecified&&a){x=[];for(let m=0;m<this.fileDirectory.BitsPerSample.length;m+=1)x.push(m)}return this.readRasters({window:e,interleave:t,samples:x,pool:s,width:i,height:n,resampleMethod:o,signal:l})}let h;switch(f){case F.WhiteIsZero:case F.BlackIsZero:case F.Palette:h=[0];break;case F.CMYK:h=[0,1,2,3];break;case F.YCbCr:case F.CIELab:h=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const u={window:c,interleave:!0,samples:h,pool:s,width:i,height:n,resampleMethod:o,signal:l},{fileDirectory:g}=this,d=await this.readRasters(u),y=2**this.fileDirectory.BitsPerSample[0];let p;switch(f){case F.WhiteIsZero:p=us(d,y);break;case F.BlackIsZero:p=ds(d,y);break;case F.Palette:p=gs(d,g.ColorMap);break;case F.CMYK:p=ps(d);break;case F.YCbCr:p=ys(d);break;case F.CIELab:p=bs(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const x=new Uint8Array(p.length/3),m=new Uint8Array(p.length/3),b=new Uint8Array(p.length/3);for(let S=0,I=0;S<p.length;S+=3,++I)x[I]=p[S],m[I]=p[S+1],b[I]=p[S+2];p=[x,m,b]}return p.width=d.width,p.height=d.height,p}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const s=this.fileDirectory.GDAL_METADATA;let i=ls(s,"Item");e===null?i=i.filter(n=>Fe(n,"sample")===void 0):i=i.filter(n=>Number(Fe(n,"sample"))===e);for(let n=0;n<i.length;++n){const o=i[n];t[Fe(o,"name")]=o.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,s=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(s)return s[1]===0&&s[4]===0?[s[0],-s[5],s[10]]:[Math.sqrt(s[0]*s[0]+s[4]*s[4]),-Math.sqrt(s[1]*s[1]+s[5]*s[5]),s[10]];if(e){const[i,n,o]=e.getResolution();return[i*e.getWidth()/this.getWidth(),n*e.getHeight()/this.getHeight(),o*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const t=this.getHeight(),s=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[i,n,o,a,l,c,f,h]=this.fileDirectory.ModelTransformation,g=[[0,0],[0,t],[s,0],[s,t]].map(([p,x])=>[a+i*p+n*x,h+l*p+c*x]),d=g.map(p=>p[0]),y=g.map(p=>p[1]);return[Math.min(...d),Math.min(...y),Math.max(...d),Math.max(...y)]}else{const i=this.getOrigin(),n=this.getResolution(),o=i[0],a=i[1],l=o+n[0]*s,c=a+n[1]*t;return[Math.min(o,l),Math.min(a,c),Math.max(o,l),Math.max(a,c)]}}}class Os{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const s=this.getUint32(e,t),i=this.getUint32(e+4,t);let n;if(t){if(n=s+2**32*i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*s+i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}getInt64(e,t){let s=0;const i=(this._dataView.getUint8(e+(t?7:0))&128)>0;let n=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));i&&(n?a!==0&&(a=~(a-1)&255,n=!1):a=~a&255),s+=a*256**o}return i&&(s=-s),s}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Ft(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Ps{constructor(e,t,s,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=s,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),s=this.readUint32(e+4);let i;if(this._littleEndian){if(i=t+2**32*s,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+s,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0;const s=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let i=!0;for(let n=0;n<8;n++){let o=this._dataView.getUint8(e+(this._littleEndian?n:7-n));s&&(i?o!==0&&(o=~(o-1)&255,i=!1):o=~o&255),t+=o*256**n}return s&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const mt=`\r
\r
`;function Ut(r){if(typeof Object.fromEntries<"u")return Object.fromEntries(r);const e={};for(const[t,s]of r)e[t.toLowerCase()]=s;return e}function Cs(r){const e=r.split(`\r
`).map(t=>{const s=t.split(":").map(i=>i.trim());return s[0]=s[0].toLowerCase(),s});return Ut(e)}function Bs(r){const[e,...t]=r.split(";").map(i=>i.trim()),s=t.map(i=>i.split("="));return{type:e,params:Ut(s)}}function Ve(r){let e,t,s;return r&&([,e,t,s]=r.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),s=parseInt(s,10)),{start:e,end:t,total:s}}function Fs(r,e){let t=null;const s=new TextDecoder("ascii"),i=[],n=`--${e}`,o=`${n}--`;for(let a=0;a<10;++a)s.decode(new Uint8Array(r,a,n.length))===n&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<r.byteLength;){const a=s.decode(new Uint8Array(r,t,Math.min(n.length+1024,r.byteLength-t)));if(a.length===0||a.startsWith(o))break;if(!a.startsWith(n))throw new Error("Part does not start with boundary");const l=a.substr(n.length+2);if(l.length===0)break;const c=l.indexOf(mt),f=Cs(l.substr(0,c)),{start:h,end:u,total:g}=Ve(f["content-range"]),d=t+n.length+c+mt.length,y=parseInt(u,10)+1-parseInt(h,10);i.push({headers:f,data:r.slice(d,d+y),offset:h,length:y,fileSize:g}),t=d+y+4}return i}class Nt{async fetch(e,t=void 0){return Promise.all(e.map(s=>this.fetchSlice(s,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Ls extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,s]of e)this.onEviction(t,s.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const s=t.get(e);return this._getItemValue(e,s)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,s]=e;this.cache.has(t)||this._deleteIfExpired(t,s)===!1&&(yield e)}for(const e of this.cache){const[t,s]=e;this._deleteIfExpired(t,s)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:s=this.maxAge}={}){const i=typeof s=="number"&&s!==Number.POSITIVE_INFINITY?Date.now()+s:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],s=t.length-e;s<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(s>0&&this._emitEvictions(t.slice(0,s)),this.oldCache=new Map(t.slice(s)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,s]=e;this._deleteIfExpired(t,s)===!1&&(yield[t,s.value])}for(const e of this.oldCache){const[t,s]=e;this.cache.has(t)||this._deleteIfExpired(t,s)===!1&&(yield[t,s.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const s=e[t],[i,n]=s;this._deleteIfExpired(i,n)===!1&&(yield[i,n.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const s=e[t],[i,n]=s;this.cache.has(i)||this._deleteIfExpired(i,n)===!1&&(yield[i,n.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[s,i]of this.entriesAscending())e.call(t,i,s,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function Gs(r){return new Promise(e=>setTimeout(e,r))}function Us(r,e){const t=Array.isArray(r)?r:Array.from(r),s=Array.isArray(e)?e:Array.from(e);return t.map((i,n)=>[i,s[n]])}class oe extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,oe),this.name="AbortError"}}class Ns extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const Vs=Ns;class qs{constructor(e,t,s=null){this.offset=e,this.length=t,this.data=s}get top(){return this.offset+this.length}}class xt{constructor(e,t,s){this.offset=e,this.length=t,this.blockIds=s}}class zs extends Nt{constructor(e,{blockSize:t=65536,cacheSize:s=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Ls({maxSize:s,onEviction:(i,n)=>{this.evictedBlocks.set(i,n)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const s=[],i=[],n=[];this.evictedBlocks.clear();for(const{offset:u,length:g}of e){let d=u+g;const{fileSize:y}=this;y!==null&&(d=Math.min(d,y));const p=Math.floor(u/this.blockSize)*this.blockSize;for(let x=p;x<d;x+=this.blockSize){const m=Math.floor(x/this.blockSize);!this.blockCache.has(m)&&!this.blockRequests.has(m)&&(this.blockIdsToFetch.add(m),i.push(m)),this.blockRequests.has(m)&&s.push(this.blockRequests.get(m)),n.push(m)}}await Gs(),this.fetchBlocks(t);const o=[];for(const u of i)this.blockRequests.has(u)&&o.push(this.blockRequests.get(u));await Promise.allSettled(s),await Promise.allSettled(o);const a=[],l=n.filter(u=>this.abortedBlockIds.has(u)||!this.blockCache.has(u));if(l.forEach(u=>this.blockIdsToFetch.add(u)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const u of l){const g=this.blockRequests.get(u);if(!g)throw new Error(`Block ${u} is not in the block requests`);a.push(g)}await Promise.allSettled(a)}if(t&&t.aborted)throw new oe("Request was aborted");const c=n.map(u=>this.blockCache.get(u)||this.evictedBlocks.get(u)),f=c.filter(u=>!u);if(f.length)throw new Vs(f,"Request failed");const h=new Map(Us(n,c));return this.readSliceData(e,h)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),s=this.source.fetch(t,e);for(let i=0;i<t.length;++i){const n=t[i];for(const o of n.blockIds)this.blockRequests.set(o,(async()=>{try{const a=(await s)[i],l=o*this.blockSize,c=l-a.offset,f=Math.min(c+this.blockSize,a.data.byteLength),h=a.data.slice(c,f),u=new qs(l,h.byteLength,h,o);this.blockCache.set(o,u),this.abortedBlockIds.delete(o)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(o),this.abortedBlockIds.add(o);else throw a}finally{this.blockRequests.delete(o)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((o,a)=>o-a);if(t.length===0)return[];let s=[],i=null;const n=[];for(const o of t)i===null||i+1===o?(s.push(o),i=o):(n.push(new xt(s[0]*this.blockSize,s.length*this.blockSize,s)),s=[o],i=o);return n.push(new xt(s[0]*this.blockSize,s.length*this.blockSize,s)),n}readSliceData(e,t){return e.map(s=>{let i=s.offset+s.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));const n=Math.floor(s.offset/this.blockSize),o=Math.floor(i/this.blockSize),a=new ArrayBuffer(s.length),l=new Uint8Array(a);for(let c=n;c<=o;++c){const f=t.get(c),h=f.offset-s.offset,u=f.top-i;let g=0,d=0,y;h<0?g=-h:h>0&&(d=h),u<0?y=f.length-g:y=i-f.offset-g;const p=new Uint8Array(f.data,g,y);l.set(p,d)}return a})}}class $e{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Xe{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class Ks extends $e{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class js extends Xe{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const s=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new Ks(s)}}class Hs extends $e{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Ys extends Xe{constructRequest(e,t){return new Promise((s,i)=>{const n=new XMLHttpRequest;n.open("GET",this.url),n.responseType="arraybuffer";for(const[o,a]of Object.entries(e))n.setRequestHeader(o,a);n.onload=()=>{const o=n.response;s(new Hs(n,o))},n.onerror=i,n.onabort=()=>i(new oe("Request aborted")),n.send(),t&&(t.aborted&&n.abort(),t.addEventListener("abort",()=>n.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}const Ge={};class $s extends $e{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class Xs extends Xe{constructor(e){super(e),this.parsedUrl=Ge.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",Ge)}constructRequest(e,t){return new Promise((s,i)=>{const n=this.httpApi.get({...this.parsedUrl,headers:e},o=>{const a=new Promise(l=>{const c=[];o.on("data",f=>{c.push(f)}),o.on("end",()=>{const f=Buffer.concat(c).buffer;l(f)}),o.on("error",i)});s(new $s(o,a))});n.on("error",i),t&&(t.aborted&&n.destroy(new oe("Request aborted")),t.addEventListener("abort",()=>n.destroy(new oe("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class Ze extends Nt{constructor(e,t,s,i){super(),this.client=e,this.headers=t,this.maxRanges=s,this.allowFullFile=i,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(s=>this.fetchSlice(s,t))))}async fetchSlices(e,t){const s=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:i,length:n})=>`${i}-${i+n}`).join(",")}`},signal:t});if(s.ok)if(s.status===206){const{type:i,params:n}=Bs(s.getHeader("content-type"));if(i==="multipart/byteranges"){const h=Fs(await s.getData(),n.boundary);return this._fileSize=h[0].fileSize||null,h}const o=await s.getData(),{start:a,end:l,total:c}=Ve(s.getHeader("content-range"));this._fileSize=c||null;const f=[{data:o,offset:a,length:l-a}];if(e.length>1){const h=await Promise.all(e.slice(1).map(u=>this.fetchSlice(u,t)));return f.concat(h)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const i=await s.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:s,length:i}=e,n=await this.client.request({headers:{...this.headers,Range:`bytes=${s}-${s+i}`},signal:t});if(n.ok)if(n.status===206){const o=await n.getData(),{total:a}=Ve(n.getHeader("content-range"));return this._fileSize=a||null,{data:o,offset:s,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const o=await n.getData();return this._fileSize=o.byteLength,{data:o,offset:0,length:o.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Je(r,{blockSize:e,cacheSize:t}){return e===null?r:new zs(r,{blockSize:e,cacheSize:t})}function Zs(r,{headers:e={},credentials:t,maxRanges:s=0,allowFullFile:i=!1,...n}={}){const o=new js(r,t),a=new Ze(o,e,s,i);return Je(a,n)}function Js(r,{headers:e={},maxRanges:t=0,allowFullFile:s=!1,...i}={}){const n=new Ys(r),o=new Ze(n,e,t,s);return Je(o,i)}function Qs(r,{headers:e={},maxRanges:t=0,allowFullFile:s=!1,...i}={}){const n=new Xs(r),o=new Ze(n,e,t,s);return Je(o,i)}function Ws(r,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?Zs(r,t):typeof XMLHttpRequest<"u"?Js(r,t):Qs(r,t)}function qe(r){switch(r){case w.BYTE:case w.ASCII:case w.SBYTE:case w.UNDEFINED:return 1;case w.SHORT:case w.SSHORT:return 2;case w.LONG:case w.SLONG:case w.FLOAT:case w.IFD:return 4;case w.RATIONAL:case w.SRATIONAL:case w.DOUBLE:case w.LONG8:case w.SLONG8:case w.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${r}`)}}function ei(r){const e=r.GeoKeyDirectory;if(!e)return null;const t={};for(let s=4;s<=e[3]*4;s+=4){const i=hs[e[s]],n=e[s+1]?he[e[s+1]]:null,o=e[s+2],a=e[s+3];let l=null;if(!n)l=a;else{if(l=r[n],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),o===1&&(l=l[0]))}t[i]=l}return t}function se(r,e,t,s){let i=null,n=null;const o=qe(e);switch(e){case w.BYTE:case w.ASCII:case w.UNDEFINED:i=new Uint8Array(t),n=r.readUint8;break;case w.SBYTE:i=new Int8Array(t),n=r.readInt8;break;case w.SHORT:i=new Uint16Array(t),n=r.readUint16;break;case w.SSHORT:i=new Int16Array(t),n=r.readInt16;break;case w.LONG:case w.IFD:i=new Uint32Array(t),n=r.readUint32;break;case w.SLONG:i=new Int32Array(t),n=r.readInt32;break;case w.LONG8:case w.IFD8:i=new Array(t),n=r.readUint64;break;case w.SLONG8:i=new Array(t),n=r.readInt64;break;case w.RATIONAL:i=new Uint32Array(t*2),n=r.readUint32;break;case w.SRATIONAL:i=new Int32Array(t*2),n=r.readInt32;break;case w.FLOAT:i=new Float32Array(t),n=r.readFloat32;break;case w.DOUBLE:i=new Float64Array(t),n=r.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===w.RATIONAL||e===w.SRATIONAL)for(let a=0;a<t;a+=2)i[a]=n.call(r,s+a*o),i[a+1]=n.call(r,s+(a*o+4));else for(let a=0;a<t;++a)i[a]=n.call(r,s+a*o);return e===w.ASCII?new TextDecoder("utf-8").decode(i):i}class ti{constructor(e,t,s){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=s}}class Ee extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class ri{async readRasters(e={}){const{window:t,width:s,height:i}=e;let{resX:n,resY:o,bbox:a}=e;const l=await this.getImage();let c=l;const f=await this.getImageCount(),h=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(s||i){if(t){const[d,y]=l.getOrigin(),[p,x]=l.getResolution();a=[d+t[0]*p,y+t[1]*x,d+t[2]*p,y+t[3]*x]}const g=a||h;if(s){if(n)throw new Error("Both width and resX passed");n=(g[2]-g[0])/s}if(i){if(o)throw new Error("Both width and resY passed");o=(g[3]-g[1])/i}}if(n||o){const g=[];for(let d=0;d<f;++d){const y=await this.getImage(d),{SubfileType:p,NewSubfileType:x}=y.fileDirectory;(d===0||p===2||x&1)&&g.push(y)}g.sort((d,y)=>d.getWidth()-y.getWidth());for(let d=0;d<g.length;++d){const y=g[d],p=(h[2]-h[0])/y.getWidth(),x=(h[3]-h[1])/y.getHeight();if(c=y,n&&n>p||o&&o>x)break}}let u=t;if(a){const[g,d]=l.getOrigin(),[y,p]=c.getResolution(l);u=[Math.round((a[0]-g)/y),Math.round((a[1]-d)/p),Math.round((a[2]-g)/y),Math.round((a[3]-d)/p)],u=[Math.min(u[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return c.readRasters({...e,window:u})}}class Qe extends ri{constructor(e,t,s,i,n={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=s,this.firstIFDOffset=i,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const s=this.bigTiff?4048:1024;return new Ps((await this.source.fetch([{offset:e,length:typeof t<"u"?t:s}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,s=this.bigTiff?8:2;let i=await this.getSlice(e);const n=this.bigTiff?i.readUint64(e):i.readUint16(e),o=n*t+(this.bigTiff?16:6);i.covers(e,o)||(i=await this.getSlice(e,o));const a={};let l=e+(this.bigTiff?8:2);for(let h=0;h<n;l+=t,++h){const u=i.readUint16(l),g=i.readUint16(l+2),d=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4);let y,p;const x=qe(g),m=l+(this.bigTiff?12:8);if(x*d<=(this.bigTiff?8:4))y=se(i,g,d,m);else{const b=i.readOffset(m),S=qe(g)*d;if(i.covers(b,S))y=se(i,g,d,b);else{const I=await this.getSlice(b,S);y=se(I,g,d,b)}}d===1&&cs.indexOf(u)===-1&&!(g===w.RATIONAL||g===w.SRATIONAL)?p=y[0]:p=y,a[he[u]]=p}const c=ei(a),f=i.readOffset(e+s+t*n);return new ti(a,c,f)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof Ee?new Ee(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new Ee(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new Rs(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(s){if(s instanceof Ee)t=!1;else throw s}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",s=t.length+100;let i=await this.getSlice(e,s);if(t===se(i,w.ASCII,t.length,e)){const o=se(i,w.ASCII,s,e).split(`
`)[0],a=Number(o.split("=")[1].split(" ")[0])+o.length;a>s&&(i=await this.getSlice(e,a));const l=se(i,w.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,f])=>{this.ghostValues[c]=f})}return this.ghostValues}static async fromSource(e,t,s){const i=(await e.fetch([{offset:0,length:1024}],s))[0],n=new Os(i),o=n.getUint16(0,0);let a;if(o===18761)a=!0;else if(o===19789)a=!1;else throw new TypeError("Invalid byte order value.");const l=n.getUint16(2,a);let c;if(l===42)c=!1;else if(l===43){if(c=!0,n.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const f=c?n.getUint64(8,a):n.getUint32(4,a);return new Qe(e,a,c,f,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function si(r,e={},t){return Qe.fromSource(Ws(r,e),t)}var ii=(r,e,t)=>(A(e).length=0,t(),ie(e,A(e),!0)),ni=(r,e)=>e(),oi=de('<div><input name="checkbox" type="checkbox"/> <label for="checkbox"> </label></div>'),ai=de('<p> </p> <progress max="100"></progress>',1),li=de("<p> </p>"),ci=de("<p> </p> <fieldset><legend>Layers to turn on/off:</legend> <button>all off</button> <button>all on</button> <!></fieldset> <!>",1),fi=de("<h1>GeoTIFF App</h1> <!>",1);function xi(r,e){pr(e,!0);const[t,s]=xr(),i=()=>wr(d,"$blendingProgress",t),n=[];let o=0,a=0,l=Pe(nt([])),c=[],f,h=Pe(nt([])),u=Pe(0),g;const d=qt(0);let y,p;y=new Worker(new URL(""+new URL("../workers/bitUnpackerWorker-CzoPhSTw.js",import.meta.url).href,import.meta.url),{type:"module"}),p=new Worker(new URL(""+new URL("../workers/blendworker-dMZLS_IZ.js",import.meta.url).href,import.meta.url),{type:"module"}),y.onmessage=_=>{var R;const{bitLayers:E,rasterLayers:v}=_.data;if(!Array.isArray(E)||!Array.isArray(v)){console.error("Worker returned unexpected data:",_.data);return}c=E,ie(l,v,!0),A(l).forEach((T,P)=>{T.data=c[P]}),f=(R=A(l).find(T=>T.filename==="ENGLAND_MASTER.tif"))==null?void 0:R.data,ie(h,A(l).map(T=>T.filename).filter(T=>T!="ENGLAND_MASTER.tif"),!0),g=A(l).map(T=>T.filename).filter(T=>T!="ENGLAND_MASTER.tif"),x()},p.onmessage=_=>{_.data.progress!==void 0?d.set(_.data.progress):_.data.type==="done"&&(ie(u,_.data.activeCount,!0),d.set(100))};function x(){if(!f)return;const E=A(l).filter(v=>A(h).includes(v.filename)).map(v=>v.data);d.set(0),p.postMessage({bitArrays:E,englandMask:f})}function m(_){const E=_.trim().split(`
`),v=E[0].split(",");return E.slice(1).map(R=>{const T=R.split(","),P={};return v.forEach((N,W)=>P[N]=T[W]),P})}zt(async()=>{const E=await(await si("./multi.tif")).getImage();o=E.getWidth(),a=E.getHeight();const R=await(await fetch("./bitpacking_metadata.csv")).text(),T=m(R),P=await E.readRasters();y.postMessage({rasters:P,width:o,height:a,rasterLayers:T}),console.log("sp",g)});var b=fi(),S=j(xe(b),2);{var I=_=>{var E=ci(),v=xe(E),R=te(v);re(v);var T=j(v,2),P=j(te(T),2);P.__click=[ii,h,x];var N=j(P,2);N.__click=()=>(A(h).length=0,g.forEach(D=>A(h).push(D)),x(),ie(h,A(h),!0));var W=j(N,2);Sr(W,17,()=>A(l),D=>D.filename,(D,k)=>{var C=Vt(),B=xe(C);{var X=Z=>{var ce=oi(),q=te(ce);Dr(q);var pe;q.__change=[ni,x];var z=j(q,2),J=te(z);re(z),re(ce),we((K,ye)=>{pe!==(pe=A(k).filename)&&(q.value=(q.__value=A(k).filename)??""),be(J,`${K??""}: ${ye??""} Ha`)},[()=>A(k).filename.replace(".tif",""),()=>{var K;return((K=A(k).area)==null?void 0:K.toLocaleString())??0}]),Mr(n,[],q,()=>(A(k).filename,A(h)),K=>ie(h,K)),ee(Z,ce)};Ce(B,Z=>{A(k).filename!=="ENGLAND_MASTER.tif"&&Z(X)})}ee(D,C)}),re(T);var ke=j(T,2);{var $=D=>{var k=ai(),C=xe(k),B=te(C);re(C);var X=j(C,2);we(Z=>{be(B,`Blending... ${Z??""}%`),kr(X,i())},[()=>i().toFixed(1)]),ee(D,k)},Me=D=>{var k=li(),C=te(k);re(k),we(B=>be(C,`English land outside selected categories: 
      ${B??""} Ha`),[()=>{var B;return(((B=A(l).find(X=>X.filename==="ENGLAND_MASTER.tif"))==null?void 0:B.area)-A(u)).toLocaleString()}]),ee(D,k)};Ce(ke,D=>{i()<100?D($):D(Me,!1)})}we(D=>be(R,`England total: ${D??""} Ha`),[()=>{var D;return(D=A(l).find(k=>k.filename==="ENGLAND_MASTER.tif"))==null?void 0:D.area.toLocaleString()}]),ee(_,E)};Ce(S,_=>{A(l).length&&_(I)})}ee(r,b),yr(),s()}mr(["click","change"]);export{yi as L,xi as _,mi as a,Lt as g};
